<% layout('/layout/boilerplate') %>
    <div>
        <h2 class="my-2 display-5 text-center">Edit Supervisor Details</h2>
        <form action="/admin/supervisors/<%= supervisor._id %>?_method=PATCH" method="POST"
            class="validated-form bg-light pt-3" novalidate>
            <div class="row justify-content-center">
                <div class="col-md-4 mb-3">
                    <label for="name" class="form-label">Full Name <span class="required-field">*</span></label>
                    <input type="text" class="form-control" id="name" name="name" required
                        value="<%= supervisor.name %>">
                </div>
                <div class="col-md-4 mb-3">
                    <label for="designation" class="form-label">Designation <span
                            class="required-field">*</span></label>
                    <input type="text" class="form-control" id="designation" name="designation"
                        value="<%= supervisor.designation %>" required>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-4 mb-3">
                    <label for="email" class="form-label">email <span class="required-field">*</span></label>
                    <input type="email" class="form-control" id="email" name="email" value="<%= supervisor.email %>"
                        required>
                </div>
                <div class=" col-md-4 mb-3">
                    <label for="contactNo" class="form-label">Contact No <span class="required-field">*</span></label>
                    <input type="text" class="form-control" id="contactNo" name="contactNo"
                        value="<%= supervisor.contactNo %>" required>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-4 mb-3">
                    <label for="type" class="form-label">Supervisor Type <span class="required-field">*</span></label>
                    <div class="form-check">
                        <input type="radio" id="internal" value="internal" name="supervisorType" class="form-chek-input"
                            <%=(supervisor.supervisorType==="internal" )?"checked":"" %>>
                        <label for="internal" class="form-check-label"> Internal</label>
                    </div>

                    <div class="form-check">
                        <input type="radio" id="external" value="external" name="supervisorType" class="form-chek-input"
                            <%=(supervisor.supervisorType==="external" )?"checked":"" %>>
                        <label for="external" class="form-check-label"> External</label>
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="department" class="form-label">Department Name</label>
                    <input type="text" class="form-control" id="department" name="dept_name"
                        value="<%= supervisor.dept_name %>">
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-4 mb-3">
                    <label for="university" class="form-label">University Name <span
                            class="required-field">*</span></label>
                    <input type="text" class="form-control" name="universityName" id="university"
                        value="<%= supervisor.universityName %>" required>
                </div>
                <div class="col-md-4 mb-3">
                    <label for="address" class="form-label">Address <span class="required-field">*</span></label>
                    <textarea name="address" id="address" cols="30" rows="3" class="form-control"
                        required><%= supervisor.address %></textarea>
                </div>
            </div>
            <!-- research area -->
            <div class="row justify-content-center">
                <div class="col-md-4" id="researchAreaBlock">
                    <label for="researchArea" class="form-label" id="researchAreaBlockLabel">Research Area <span
                            class="required-field">*</span></label>
                    <%for(let area of supervisor.researchArea){ %>
                        <input type="text" class="form-control mb-2" name="researchArea" id="researchArea" required
                            value="<%= area %>">
                        <% }%>

                            <a class="btn btn-dark my-2" id="addResearchArea"> Add Research Area </a>
                            <a class="btn btn-dark my-2" id="removeResearchArea">Remove</a>
                </div>
                <div class="col-md-4">

                </div>
            </div>
            <div class=" d-flex mb-3 justify-content-center">
                <button class="btn btn-success">Edit Supervisor</button>
            </div>
        </form>
    </div>

    <script src="/javascripts/bootstrapFormValidation.js"></script>
    <script>
        const addResearchAreaBtn = document.getElementById('addResearchArea');
        const removeResearchAreaBtn = document.getElementById('removeResearchArea');
        const researchAreaBlockLabel = document.getElementById('researchAreaBlockLabel');
        addResearchAreaBtn.addEventListener('click', () => {
            const input = document.createElement('input');
            input.classList.add('form-control', 'mb-2');
            input.name = 'researchArea';
            addResearchAreaBtn.before(input);
        })
        removeResearchAreaBtn.addEventListener('click', () => {
            const input = document.querySelector('#researchAreaBlock input:nth-last-of-type(1)');
            if (researchAreaBlockLabel.nextElementSibling.nextElementSibling.tagName === "INPUT")
                input.remove();
        })
    </script>